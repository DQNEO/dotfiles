## 移動関連
M-m 行の最初の文字に移動
M-a, M-e:文単位で移動


C-M-f, C-M-b:現在のインデントで，式単位で移動 
C-M-n, C-M-p:括弧単位で移動する
C-M-u, C-M-d:インデントを 1 つ上がる (下がる)
C-M-a, C-M-e:関数単位での移動
C-M-k:式を切り取る
C-M-\:リージョン内を再インデント


C-u 8 C-x $ 折り畳み
C-x $ 折り畳み解除

http://www.bookshelf.jp/soft/meadow_42.html#SEC643

## 空白削除系
M-space

## VC-mode
C-u C-x v g  リビジョンを指定してannotate
http://e-arrows.sakura.ne.jp/2010/02/vim-to-emacs.html

## .emacsに必ず書くこと

;; do not make backup files
(setq make-backup-files nil)

## 矩形編集

C-x r o 空白文字で埋まった矩形を挿入
C-x r d 矩形を削除
C-x r t 矩形を文字列で置き換え
C-x r c 矩形を空白文字で置き換え
C-x r k 矩形をキルリングに追加
C-x r y キルリングをヤンク

## 色一覧
M-x list-colors-display

## 起動オプション
* +n(数字) 起動後ファイルの n 行目に移動する
* -nw 新たな X のウィンドウを作らず、現在のコンソール上で実行する
* -q 設定ファイル (~/.emacs など) を読み込まない
* -u user userの設定ファイルを読み込む
* -u hoge とすると、起動時の設定ファイルとして ~hoge/.emacs が読み込まれる
* -l file コンフィグファイル file を読み込む
* -f function LISP の関数を実行する。


## カーソル移動
* C-a 行頭に移動(*)
* C-e 行末に移動(*)
* C-n 1行下に移動(*)
* C-p 1行上に移動(*)
* C-f 1文字前に移動(*)
* C-b 1文字後ろに移動(*)
* C-v 1画面進む(*)
* M-v 1画面戻る(*)
* M-< 先頭行に移動(*)
* M-> 最終行に移動(*)
* M-r 表示されている画面の中央の行の行頭に移動する
* M-a カーソルを段落の先頭に移動
* M-e カーソルを段落の末尾に移動
* C-x C-x マーク位置へ移動、もう一度入力すると元に戻る
* C-x = 現在カーソルがどこにあるかを表示
* M-x goto-line 指定の行へ移動(*)

## 括弧単位，関数単位でのカーソル移動 
* C-M-n, C-M-p:括弧単位で移動する
* C-M-f, C-M-b:現在のインデントで，式単位で移動
* C-M-u, C-M-d:インデントを 1 つ上がる (下がる)
* M-a, M-e:文単位で移動
 関数なら，その開始場所へ一気にジャンプ．文章なら文の先頭(行末) へ移動．
 移動後，M-kとすると，文単位で切り取りできます．C-a C-kと同じよう
 なことを文単位でするのが，M-a M-kです．

* C-M-a, C-M-e:関数単位での移動
* C-M-SPC:     式をリージョンで選択
* C-M-k:       式を切り取る
* C-M-h:       関数全体をリージョンで選択します．
* C-M-\:       リージョン内を再インデント

* C-x $:      全体がどうなっているのか知りたい時には，
 (set-selective-display)．これは，C-u 3 C-x $のように，引数
 を与えて使います．こうすると， 3 文字以上字下げされているものは表示さ
 れなくなります．そのため，全体を見回すのに便利です．
 再度，C-x $とすると，隠れていた部分を元に戻すことができます．

ただし，このようにテキストの一部を隠すコマンドは物理行移動の Emacs
Lisp や設定などとの相性が悪いです．ものによっては，カーソルが変なとこ
ろへ移動してしまうこともあります． 


## マーク

* C-@ 現在カーソルのある位置をマーク(*)
* C-SPACE 現在カーソルのある位置をマーク(*)
* C-x h バッファ全体をマーク
* M-@     (mark-word)             単語の最後にマークを設定する
* C-x h   (mark-hole-buffer)      バッファ全体にリージョンを設定する

## 検索

* C-s インクリメンタルサーチ(あるいは次検索)(*)
* C-s C-s 次検索(*)
* C-s Enter 日本語検索
* C-r 後方インクリメンタルサーチ
* M-C-s 正規表現インクリメンタルサーチ
* M-C-r 後方正規表現インクリメンタルサーチ

## 削除・貼り付け

* C-d 1文字削除(*)
* C-k カーソル位置からその行の行末まで削除(*)
* C-w マークした位置からカーソル位置までを削除してキルリングにコピー(*)
* M-w マークした位置からカーソル位置までをキルリングにコピー(*)
* C-y キルリングの内容を貼り付け(*)
* M-y 一つ前のキルリングの内容を貼り付け。
* C-y に続けて M-y とすることでキルリングをさかのぼることができる(M-y は C-y の直後に押さないと意味がない)。
* C-y M-y M-y M-y … と連続してさかのぼることも可能。
* C-x C-t カーソルのある行とその上の行を入れ換え
* C-o 空行を挿入
* C-x u アンドゥ(*)
* C-g 実行中のコマンドをキャンセル(*)
* C-l 画面を再描画して、カーソルのある行が画面の中心にくるように表示(*)
* C-m リターンキーと同じ
* C-x r k 矩形領域の切り取り
* C-x r y 矩形領域の貼り付け
* C-x r t 矩形領域を指定した文字列で置き換え
* C-x r o 矩形領域に空白を挿入
* C-x r o 矩形領域を空白で置き換え


## 保存・終了
* C-x C-s バッファ内容をファイルに保存(*)
* C-x C-w ファイル名を指定してセーブ
* C-x C-c muleの終了(*)
* C-z サスペンド

## バッファ・ウィンドウ
* C-x C-f 指定ファイルを編集(*)
* C-x C-b 現在のバッファのリストを表示(*)
* C-x 0 カレントウィンドウを消去(*)
* C-x 1 カレントウィンドウ以外のウィンドウを消去(*)
* C-x 2 カレントウィンドウを横に2分割(*)
* C-x 3 カレントウィンドウを縦に2分割
* C-x o 次ウィンドウに移動(*)
* C-x + 全ウィンドウを均等なサイズに変更
* C-x ^ カレントウィンドウを拡大(*)
* C-x b 編集するバッファを変更(*)
* C-x C-b 現在編集中のバッファのリストを表示
* C-x C-d ディレクトリを表示
* C-x d diredを実行
* C-x C-r 新たにファイルを読み込む(リードオンリー)
* C-x i ファイル内容を現在位置に挿入
* C-x C-x バッファを削除
* C-x 4系 他のウィンドウを操作
* C-x 4 b 他のウィンドウに指定バッファを表示
* C-x 4 f 他のウィンドウでファイルを編集
* C-x 4 m 他のウィンドウでメール
* C-x 4 r 他のウィンドウにファイルを読み込む(リードオンリー)
* C-x 4 d 他のウィンドウでdired
* C-x 5系 他のフレームを操作
* Ctrl-x + 5, 2	新しいウィンドウを開く
* Ctrl-x + 5, 0	上のキー操作で開いたウィンドウを閉じる
* C-x 5

## マクロ
* C-x ( マクロの設定を開始
* C-x ) マクロの設定の終了
* C-x e 設定したマクロを実行

## ヘルプ(help)
* M-x describe-bindings 現在のキー割り当ての説明
* M-x describe-variable emacs変数の説明
* M-x describe-function 関数の説明
* M-x describe-mode 現在のメジャーモードの説明

◇　ヘルプ ESC x help-for-help ↓ と打つと、ヘルプを選ぶ画面が開く。そ
の画面において
b：　　キーバインドと対応するコマンドのリストを表示する 

◇　man コマンドの結果をバッファで見る ESC x manual-entry ↓ と打った
後、マニュアルを見たいコマンドの名前を入れると新たにバッファを作成し、
マニュアルの内容を表示する。 


## 漢字変換

C-\ たまごの起動
C-o かんなの起動
C-x SPC マーク位置からカーソル位置まで再変換

## 制御コード(control code)
C-q C-code
例：
C-q C-g で制御コード(^G)が入力される。

## その他

C-u n command commandをn回繰り返す。C-u 3 C-n は C-n C-n C-n と同じ
C-x TAB マークした場所からカーソル位置までの行を字下げする
C-^ 記号入力モード
C-x = カーソルの位置を表示
C-x m メールを送信
ESC ! シェルコマンドを実行
C-x l バッファの行数と現在位置を表示

## 便利なコマンド
* M-x goto-line 指定の行に移る(行番号を指定)
* M-x tabify マーク位置から現在位置までのスペースをタブに変換
* M-x untabify マーク位置から現在位置までのタブをスペースに変換
* M-x canna-touroku 新たに単語を登録 (かんな)
* M-x replace-string 文字列を置換(*)
* M-x replace-regexp 文字列を置換 (正規表現で指定)
* M-x rmail メールを読む

## モード
* M-x fundamental-mode 基本的なメジャーモード
* M-x override-mode 上書き/挿入モード (トグル)
* M-x auto-fill-mode 自動改行モード。

リターンキーを押したときに、その行が指定の文字数より長かったら、自動的に指定の文字数のところで改行する。任意のカラムで C-x f することで、1行の長さを設定できる。


## 大文字小文字変換 ：
* M-x capitalize-region  マークから現在位置までの範囲の単語先頭文字を大文字にする
* C-x C-l (downcase-region)       リージョン内の文字を英小文字に変換する
* C-x C-u (upcase-region)         リージョン内の文字を英大文字に変換する
* M-c     (capitalize-word)       先頭の単語を大文字に変換
* M-l     (downcase-word)         単語を小文字に変換
* M-u     (upcase-word)           単語を大文字に変換

##  置換実行時の各種操作 (replace)
^: 誤って変更してしまった場合などに、 1つまえの出現箇所
（あるいは置換してしまった出現箇所）に戻る。これは、マー
クリングから位置を取り出して動作する。 query-replaceは直
前の1つの置換位置だけを記録するため、 ^を続けて入力しても
意味はない。

q: これ以上何も置換しないで終了する。 

##  dired の使いかた
dired (ディレクトリエディット) はファイルやディレクトリをいろいろ見てまわるのに便利な
モードです。でも、これを使っているとバッファがすごくたくさんできてしまうので、注意してください。

 ・ C-x d   (dired)                 dired モードに入る
 ・ R       (dired-do-rename)       ファイル名変更あるいはファイルの移動(mv)...
                                    (マークしたファイルがあれば全てを移動)
 ・ f       (dired-advertised-find-file) そのウインドウにファイルを表示
 ・ v       (dired-view-file)       ファイルの中身を見るだけ (編集はしない)
 ・ u       (dired-unmark)          つけたマークをとり消す
 ・ o       (dired-find-file-other-window) 別のウインドウにファイルを表示
 ・ d       (dired-flag-file-deletion) ファイルに削除マークをつける (u で取消)
 ・ x       (dired-do-flagged-delete) 削除マークをつけたファイルを本当に削除...
 ・ C       (dired-do-copy)         ファイルをコピー (cp)...
                                    (マークしたファイルがあれば全てをコピー)
 ・ M       (dired-do-chmod)        ファイルのパーミッションを変更(chmod)...
 ・ g       (revert-buffer)         現在の表示を更新
 ・ m       (dired-mark)            ファイルをマークする
                                    (これで移動やコピーがいっぺんにできる)
 ・ q       (dired-quit)            dired モードを抜ける

R 	mv
s 	ソート。または「C-u s -lSr」など。

D 	rm
+ 	mkdir
Z 	gzip
i 	サブディレクトリの内容を表示。$ で表示トグル。
t 	マークの反転。
A 	マークしたファイルを検索。M-, で次のマッチ箇所へ。
Q 	マークしたファイルに対して、query-replace-regex。
= 	diff
M-= 	「*~」とdiff。
~ 	「*~」に削除マーク。
% d regexp 	ファイル名にマッチしたら削除マーク

##  バッファメニューの使いかた
Emacs ではいくつものバッファが開けます。また、ヘルプや mh-e や dired などもそれを使うと
勝手にバッファを生成します。こうしているうちに、いまどのバッファが存在していて、自分が
編集しているのはどれなのか、わからなくなってしまいます。このようなときはバッファメニュー
モードに入っていらないバッファを削除しましょう (でも、バッファメニューモードもやはり、自分のバッファを生成しますけど)。

 ・ C-x C-b (list-buffers)          バッファメニュー モードに入る
 ・ d       (Buffer-menu-delete)    バッファに削除マークをつける
 ・ C-k     (Buffer-menu-delete)    バッファに削除マークをつける
 ・ x       (Buffer-menu-execute)   削除マークをつけたバッファを本当に削除
 ・ o       (Buffer-menu-other-window) バッファを別ウインドウで開く
 ・ f       (Buffer-menu-this-window) バッファをこのウインドウで開く
 ・ s       (Buffer-menu-save)      バッファを保存
 ・ %       (Buffer-menu-toggle-read-only) バッファの変更禁止を切り替え
 ・ m       (Buffer-menu-mark)      バッファをマーク
 ・ 1       (Buffer-menu-1-window)  ウインドウを全開にしてバッファを開く
 ・ 2       (Buffer-menu-2-window)  マークしたバッファを 2つのウインドウに開く
 ・ q       (Buffer-menu-quit)      バッファメニュー モードを抜ける


##  cmode
便利な技

プログラムを書くとき以外でも使えるので，活用してください．
# インデントを揃える
c-c c-q

# 単語を補完する
alt-/
(altキーを押しながら '/')

##   ECB

M-x load-library   : 
M-x locate-library :


##   infoファイルの追加
1. /usr/local/info にinfoファイルを置く
2. /usr/local/dir ファイルに追加したいファイルを記述
以上.

##   起動を高速化

ファイルをバイトコンパイルするには、M-x byte-compile-file でコンパイル
したいファイルを選ぶか、ファイルを開いてから「Emacs Lisp」メニューの
「Byte-Compile This File」を選びます。拡張子「*.elc」の付いた中間コー
ドファイルができていることを確認して下さい。

あとはこの「*.elc」ファイルを「.emacs」から読み込むだけです。例えば、~
/lib/start.elc というファイルを読み込む場合は

(load-file "~/lib/start.elc")

のようにします。「.emacs」ファイルが長くなると Emacs の起動に時間がか
かってしまいがちですが、コンパイルした別ファイルをロードすることで、か
なり時間が短縮されます。

なお、Emacs は起動時に 1 .emacs.elc → 2 .emacs.el → 3 .emacs の順に
ファイルを探して、最初に見つかったファイルをロードします。 Emacs の設
定ファイル「.emacs(.el)」を直接バイトコンパイルし、 emacs.elc ファイル
を作っておくと有効でしょう。



#   etags
タグジャンプ
Emacs lisp や C ， C++ などのプログラムを書いていると，この関数定義は
どうなっていたかなと考えることはよくあります．しかし，このたびにファイ
ルを開いて検索してというのは非常に面倒です．

そこで，タグジャンプという非常に便利な機能があります．これは，どのファ
イルに何という関数があるかのリスト (タグファイル) を作成しておき，それ
をもとに関数を定義しているファイルの関数定義部分を開いてくれます．

## タグファイルの作成

この機能を使うためには，まずタグファイルを作る必要があります．作り方は簡単． shell で

 etags *.el

のように指定します．これで TAGS というファイルができます．複数のディレクトリは

 etags mylisp/*.el bin/*.[hc]

のようにすればできます．これで，カレントディレクトリに TAGS というファイルができます．

## タグジャンプ

タグジャンプは M-. (find-tag) でできます．初回に限り，TAB や SPC で補
完しようとすると， TAGS ファイルの場所を聞いてきますので，作った TAGS
ファイルを指定します．
逆に戻るのは M-* (pop-tag-mark) です．

これで，TAB や SPC での補完を使いながら関数を指定でき，一気に関数定義
へ飛ぶことができます．

## タグファイルに登録されているファイルを検索

さらに， TAGS ファイルに登録されているファイルのみを全文検索することも
できます．方法は M-x tags-search です．次の検索結果へは，M-, で飛ぶこ
とができます．同じように置換もできます．M-x tags-query-replace です．

## その他の機能

同名の関数を持つファイルが複数あった時は，C-u M-. で次へ飛ぶことができます．前へ戻るのは C-u - M-. です．

他の機能として

TAGS ファイルの切り替え → M-x visit-tags-table．
関数の一覧を表示 → M-x list-tags
正規表現に一致した関数のみを表示 → M-x tags-apropos
タグファイルの情報をリセット → M-x tags-reset-tags-tables
タグファイルが読み込まれていると，M-TAB で関数の補完もできます．毎回，コピーしたりといった手間が省け，非常に便利です．
これを使い出すと Meadow が手放せなくなってきます． 

##   文字コード ascii code                                                        #
C-x [RET] f
M-x set-buffer-file-coding-system[RET]
このコマンドに続いて、文字コードを指定

euc-jp-unix     文字コードにEUC-JPを指定改行文字はUNIX形式
euc-jp-dos 	文字コードにEUC-JPを指定改行文字はWindows形式
euc-jp-mac 	文字コードにEUC-JPを指定改行文字はmac形式
shift_jis-unix  文字コードにshift-jisを指定改行文字はUNIX形式
shift_jis-dos   文字コードにshift-jisを指定改行文字はdos形式
shift-jis-mac   文字コードにshift-jisを指定改行文字はmac形式


##   help key binding                                                             #

(describe-mode) という関数が割り当てられ
ています。これを実行すると、現在のバッファのモードの説明と、モードに依存したキー・バインドの一覧が表示されます。何か発見があるかも知れませんので、各モードで実行してみると良いと思います。


(describe-bindings) を実行すると、さらにすべてのキー・バイン
ドが表示されますので、一度じっくり眺めてみるのも一興かも知れません。
たくさんありすぎて、何度も挫折しています。 



## 他
Redo

Ctr + x + ESC + ESC

shft+space でcannaを起動する 
```
(define-key global-map [?\S-\ ] 'toggle-input-method)
```
